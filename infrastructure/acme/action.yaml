name: ACME stack context
author: Sean Christians
description: Provide context and automation for the ACME stack.

inputs:
  mode:
    description: Terraform provisioning step
    required: true

runs:
  using: composite
  steps:
    - name: Join Tailnet
      if: inputs.mode == 'apply'
      uses: tailscale/github-action@53acf823325fe9ca47f4cdaa951f90b4b0de5bb9 # v4.1.1
      with:
        oauth-client-id: TA1163u8TV11CNTRL-kTzGLf2dGf11CNTRL
        audience: api.tailscale.com/TA1163u8TV11CNTRL-kTzGLf2dGf11CNTRL
        tags: tag:ci
        version: latest
        ping: veronica.scchq.net
